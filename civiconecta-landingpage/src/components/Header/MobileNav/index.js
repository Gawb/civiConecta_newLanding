import './NavMobile.css';
import './menu.css';
import { useState, useRef, useEffect } from 'react';

const burgerIcon = (
    <svg className='burger-icon' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 70 61.25">
        <title>Menu - Civicon</title>
        <g id="Capa_2" data-name="Capa 2">
            <g id="Capa_1-2" data-name="Capa 1">
                <path d="M0,8.75V2.5A2.5,2.5,0,0,1,2.5,0h65A2.5,2.5,0,0,1,70,2.5V8.75a2.5,2.5,0,0,1-2.5,2.5H2.5A2.5,2.5,0,0,1,0,8.75Zm0,25V27.5A2.5,2.5,0,0,1,2.5,25h65A2.5,2.5,0,0,1,70,27.5v6.25a2.5,2.5,0,0,1-2.5,2.5H2.5A2.5,2.5,0,0,1,0,33.75Zm0,25V52.5A2.5,2.5,0,0,1,2.5,50h65A2.5,2.5,0,0,1,70,52.5v6.25a2.5,2.5,0,0,1-2.5,2.5H2.5A2.5,2.5,0,0,1,0,58.75Z" />
            </g>
        </g>
    </svg>
);

const imgLogo = (
    <svg className='img-logo-icon' id="Capa_1" data-name="Capa 1" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 120 120">
        <title>CiviConecta - iconos</title>
        <path d="M98.3,27.84a22.68,22.68,0,0,0-16.11-6.75h-.11a22.67,22.67,0,0,0-16.22,6.75l-5.85,6-5.86-5.92a22.85,22.85,0,0,0-32.45,0,23.33,23.33,0,0,0,0,32.72c2.25,2.27,10,10.12,10,10.12l4.07,4.14S56.07,95.52,59,98.48l0,0a1.43,1.43,0,0,0,1,.39,1.48,1.48,0,0,0,1-.43l10.78-10.9a3,3,0,0,0,.25-.25l.28-.3.91-.94,6.43-6.6L92.64,66.22l5.66-5.66A23.33,23.33,0,0,0,98.3,27.84ZM28.51,63.41c-1.77-1.81-3.43-3.5-4.75-4.83a20.3,20.3,0,0,1,0-28.66,19.77,19.77,0,0,1,27.83-.48h-.05a9.89,9.89,0,0,0-4.81,1.26,9.76,9.76,0,0,0-4.61,5.68l0,.07H42a8,8,0,0,0-1.76.37,12.15,12.15,0,0,0-6.58,6.32,11.6,11.6,0,0,0-.6,9.67l0,.08-.07,0a11.4,11.4,0,0,0-4.53,10.48Zm30,30.49-5.48-5.53-2-2.23a4.44,4.44,0,0,1,.21-6.25,1.44,1.44,0,0,0,.07-2,1.46,1.46,0,0,0-2-.07,7.26,7.26,0,0,0-2.16,3.9l0,.62-1.13-1.15-.39-.39h0l-6-6.07h0l-5.72-5.81,0,0a11.46,11.46,0,0,1-2.27-4.61,8.53,8.53,0,0,1,6.12-10.39,6.31,6.31,0,0,1,1.62-.2A6.47,6.47,0,0,1,43,54.76l.08.05,0,.09a6.46,6.46,0,0,0-.57,3.49,1.46,1.46,0,0,0,1.44,1.28h.18A1.46,1.46,0,0,0,45.34,58a3.58,3.58,0,0,1,3.12-4,1.45,1.45,0,0,0-.18-2.89h-.17A6.42,6.42,0,0,0,45,52.49l-.07.06-.06,0a9.39,9.39,0,0,0-5.49-1.75A9.26,9.26,0,0,0,37,51a10.86,10.86,0,0,0-1.22.4l-.11,0,0-.11a9.16,9.16,0,0,1,.67-7,9.28,9.28,0,0,1,4.91-4.83,3.74,3.74,0,0,1,2.93.06,4.48,4.48,0,0,1,2.16,3.78,1.45,1.45,0,0,0,1.45,1.31h.13a1.46,1.46,0,0,0,1.31-1.59A7.27,7.27,0,0,0,45.38,37l-.13,0-.13-.05-.07,0v-.11a7,7,0,0,1,6.49-4.42,7,7,0,0,1,7,7V56.67a4.36,4.36,0,0,1-1.3,3.12,4.44,4.44,0,0,1-3.12,1.3,1.45,1.45,0,1,0,0,2.9,7.23,7.23,0,0,0,4.24-1.38l.18-.13ZM88.39,64.25a12.18,12.18,0,0,1-1.86,4.09l-.16.16h0l-.58.59h0l-1.16,1.2a4.88,4.88,0,0,0-.84.86l-7.79,8-.87.89a4.44,4.44,0,0,1-6.25-.21,1.45,1.45,0,1,0-2.12,2A7.26,7.26,0,0,0,70.66,84l.59.05-1.48,1.52h0l-.18.18c-.23.19-5.52,5.54-8.14,8.19V70.32a4.42,4.42,0,0,1,4.42-4.41,1.46,1.46,0,0,0,0-2.91,7.26,7.26,0,0,0-4.24,1.38l-.18.13V39.35a7,7,0,0,1,12-5,6.71,6.71,0,0,1,1.54,2.35l0,.1-.1,0-.12,0-.14.06a6.47,6.47,0,0,0-3.14,3.45l0,.12-.11-.06a6.51,6.51,0,0,0-2.67-.71h0a1.45,1.45,0,0,0-.07,2.9A3.58,3.58,0,0,1,72,46.42a1.46,1.46,0,0,0,.39,1,1.42,1.42,0,0,0,1,.46h.06a1.44,1.44,0,0,0,1.45-1.39,6.39,6.39,0,0,0-1-3.75l0,0v0a4.18,4.18,0,0,1,2-3.11,4.25,4.25,0,0,1,1.57-.3,4.2,4.2,0,0,1,2.34.7,9.87,9.87,0,0,1,3.91,4.38,9.21,9.21,0,0,1,.68,7l0,.11-.11,0A10.39,10.39,0,0,0,83,51a9.44,9.44,0,0,0-9,2.4,1.45,1.45,0,1,0,2,2.07,6.47,6.47,0,0,1,4.57-1.87,6.39,6.39,0,0,1,1.63.21,8.52,8.52,0,0,1,6.12,10.4Zm7.86-5.72L91.5,63.32A11.38,11.38,0,0,0,87,52.93l-.06-.06,0-.07a11.8,11.8,0,0,0-.6-9.67,12.83,12.83,0,0,0-5.11-5.65A8.26,8.26,0,0,0,78,36.42H77.9l0-.07a9.92,9.92,0,0,0-9.42-6.91h-.1a19.78,19.78,0,0,1,13.72-5.52h.35a19.85,19.85,0,0,1,13.82,5.93,20.33,20.33,0,0,1,0,28.66Z" />
    </svg>
);

const closeIcon = (
    <svg className='close-icon' xmlns="http://www.w3.org/2000/svg" viewBox="0 0 48 48" width="48px" height="48px">
        <path d="M21.5 4.5H26.501V43.5H21.5z" transform="rotate(45.001 24 24)" />
        <path d="M21.5 4.5H26.5V43.501H21.5z" transform="rotate(135.008 24 24)" />
    </svg>
)

const MobileNav = ({ elements, logo, liElements }) => {

    const [isOpen, setIsOpen] = useState(false);
    const menuRef = useRef(false);

    const handleClickOutside = (event) =>{
        if(menuRef.current && !menuRef.current.contains(event.target)){
            setIsOpen(false);
        }
    }
    const toggleMenu = () =>{
        setIsOpen(!isOpen);
    };

    useEffect(() =>{
        document.addEventListener('touchstart', handleClickOutside);
        return () =>{
            document.removeEventListener('touchstart', handleClickOutside);
        };
    }, []);

    return (
        <>
            <nav>
                <div
                    onClick={toggleMenu}
                    aria-expanded={isOpen}
                    aria-controls="menu-items"
                    className='burger-icon-container'>
                    {burgerIcon}
                </div>
                <div className='logo-container'>
                    <img src={logo} alt='Logo civiconecta' />
                </div>
                <div className="button-container">
                    <button>Ingresar</button>
                </div>
            </nav>

            <div ref={menuRef} className={`menu ${isOpen ? 'menu-open' : ''}`}>
                <div className='menu-barnav'>
                    <div className='burger-icon-container_menu' onClick={toggleMenu}>
                        {burgerIcon}
                    </div>
                    <div className='logo-container'>
                        {imgLogo}
                    </div>
                    <div className='close-icon-container' onClick={toggleMenu}>
                        {closeIcon}
                    </div>
                </div>
                <div className='menu-elements-container'>
                    <ul>
                        {liElements(elements)}
                    </ul>
                    <button>Ingresar</button>
                </div>
            </div>
        </>
    )
}

export { MobileNav };